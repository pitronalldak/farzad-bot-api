{"version":3,"sources":["../../src/services/service.js"],"names":["util","require","Service","validation","req","getValidationResult","then","error","isEmpty","res","status","send","inspect","array","validateSession","accessToken","cookies","model","get","body","user"],"mappings":";;;;;;;AACA;;;;;;;;AADA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;;IAGqBC,O,GAEjB,mBAAc;AAAA;;AAAA;;AAAA,SAIdC,UAJc,GAID,UAACC,GAAD,EAAS;AAClBA,YAAIC,mBAAJ,GACKC,IADL,CACU,UAACC,KAAD,EAAW;AACb,gBAAI,CAACA,MAAMC,OAAN,EAAL,EAAsB;AAClB,uBAAOC,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wCAAwCX,KAAKY,OAAL,CAAaL,MAAMM,KAAN,EAAb,CAA7D,CAAP;AACH;AACJ,SALL;AAMH,KAXa;;AAAA,SAadC,eAbc,GAaG,UAACV,GAAD,EAAMK,GAAN,EAAc;AAC3B,YAAIM,cAAcX,IAAIY,OAAJ,CAAYD,WAA9B;;AAEA,YAAI,CAACA,WAAL,EAAkB;AACdN,gBAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,kBAArB;AACH;;AAED,cAAKM,KAAL,CAAWC,GAAX,CAAe,EAACH,aAAaX,IAAIe,IAAJ,CAASJ,WAAvB,EAAf,EACKT,IADL,CACU,gBAAQ;AACV,gBAAI,CAACc,IAAL,EAAW;AACPX,oBAAIC,MAAJ,CAAW,GAAX;AACH,aAFD,MAEO;AACH,uBAAOU,IAAP;AACH;AACR,SAPD;AAQH,KA5Ba;;AACV,SAAKH,KAAL,GAAa,oBAAb;AACH,C;;kBAJgBf,O","file":"service.js","sourcesContent":["var util = require('util');\nimport UserBOModel from '../models/user';\n\nexport default class Service {\n    \n    constructor() {\n        this.model = new UserBOModel();\n    }\n    \n    validation = (req) => {\n        req.getValidationResult()\n            .then((error) => {\n                if (!error.isEmpty()) {\n                    return res.status(400).send('There have been validation errors: ' + util.inspect(error.array()));\n                }\n            })\n    };\n    \n    validateSession =(req, res) => {\n        let accessToken = req.cookies.accessToken;\n        \n        if (!accessToken) {\n            res.status(400).send(\"Invalid password\");\n        }\n    \n        this.model.get({accessToken: req.body.accessToken})\n            .then(user => {\n                if (!user) {\n                    res.status(401);\n                } else {\n                    return user;\n                }\n        });\n    };\n}\n\n"]}